
<html xmlns:th="https://www.thymeleaf.org/" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

    <head  th:replace = "/fragments/head :: head"> </head>
    <body>
        <!--en este header se encuentra el nav  <div class="hero"></div>-->
        <header> 
            <nav th:replace= "/fragments/navbar :: nav"></nav>
        </header>


        <div class="container py-4">
            <div class="row">
                <div class="col-md-8 mx-auto">
                    <!-- Título de la noticia -->
                    <h1 th:text="${campana.titulo}" class="text-camp2 text-center"></h1>
                    <!-- Subtítulo de la noticia -->
                    <h4 class="featurette fw-normal lh-1 text-left text-secondary-emphasis" th:text="${campana.descripcion}"></h4>
                    <hr class="my-4">
                    <div th:if="${campana.empresa != null}" style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center;">
                            <img th:src="@{/imagen/perfil/__${campana.empresa.id}__}" alt="Imagen de perfil" class="rounded-circle img-fluid" style="width: 60px; height: 60px; margin-right: 10px;">
                            <div style="display: flex; flex-direction: column;">
                                <a th:href="@{/campana/__${campana.idCampana}__}"  class="text-muted a-card">
                                    <h7 class="card-periodista">Por <span th:text="${campana.empresa.nombreEmpresa}" class="fw-bold"></span></h7>
                                </a>
                                <div>
                                    <h7 th:text="${campana.empresa.email}"></h7>
                                </div>
                            </div>
                        </div>
                        <a sec:authorize="hasRole('VOT')" th:if="${session.usuariosession.altaBaja == true}" th:href="@{/publicacion/campana/__${campana.idCampana}__/crearPublicacion}" type="button" class="btn btn-success">Crear publicación</a>
                    </div>

                    <hr class="my-4">
                    <!-- Imagen de la publicacion -->
                    <img th:src="@{/imagen/campana/__${campana.idCampana}__}"  alt="Imagen de la campaña" class="img-fluid mb-3 w-600 h-400 shadow-lg ">

                    <div class="d-flex mb-3">
                        <p class="text-muted fw-bold" >Fecha de publicación: <span th:text="${campana.fechaAlta}" ></span></p >
                    </div>

                    <p th:text="${campana.cuerpo}" ></p>

                </div>
            </div>
            <h1 class="text-pre text-camp2 text-center">Publicaciones</h1>
            <div>
                <h2 th:if="${#lists.isEmpty(campana.publicaciones)}" class="featurette fw-normal lh-1 text-center text-secondary-emphasis">Todavía no hay publicaciones en esta campaña. Anímate y empieza ahora</h2>

            </div>
            <!-- Seccion Publicaciones -->
            <div class="container my-5">
                <div class="row" >
                    <div class="col-md-6 col-lg-4 mb-4" th:each="publicacion :${publicaciones}">
                        <a th:href="@{/publicacion/publicacion_one/__${publicacion.idPublicacion}__}"  class="a-card">
                            <div class="card shadow">
                                <img th:src="@{/imagen/publicacion/__${publicacion.idPublicacion}__}" class="card-img-top" id="img-card-tamaño-pequeño" alt="...">
                                <div class="card-body">
                                    <h1 class="fs-5 a-subrayado" th:text="${publicacion.titulo}"></h1>
                                    <p th:text="${publicacion.descripcion}"></p>
                                    <h7 class="card-votante">Por <span th:text="${publicacion.votante.nombreApellido}" class="fw-bold" ></span></h7>
                                </div>
                            </div>
                        </a>
                    </div>

                </div>
            </div>

        </div>




        <footer th:replace="/fragments/footer :: footer" ></footer>
        <!-- SCRIPTS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
        <script src="../js/eventos.js" type="text/javaScript"></script>
    </body>
</html>